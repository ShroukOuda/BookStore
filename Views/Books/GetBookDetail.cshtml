@model BookStore.Models.Book
@{
    ViewData["Title"] = "Book Details";
}

<div class="container-fluid py-4">
    <!-- Back to Books Button -->
    <div class="mb-4">
        <a asp-action="Index" class="btn btn-outline-secondary rounded-pill d-inline-flex align-items-center gap-2 px-4 py-2">
            <i class="bi bi-arrow-left"></i>
            Back to Books
        </a>
    </div>

    <div class="row g-4">
        <!-- Sidebar - Book Image -->
        <div class="col-lg-4 col-md-5">
            <div class="card border-0 shadow-sm rounded-3 sticky-top" style="top: 2rem;">
                <div class="card-body p-0">
                    <div class="book-image-container" style="height: 500px; overflow: hidden; background-color: #f8f9fa;">
                        @if (!string.IsNullOrEmpty(Model.ImageUrl))

                        {
                            <img src="@FileSettings.ImagesPath/@Model.ImageUrl"
                                 alt="@Model.Title Cover"
                                 class="w-100 h-100 rounded-3"
                                 style="object-fit: cover;" />
                        }

                        else

                        {
                            <div class="d-flex align-items-center justify-content-center h-100 text-muted">
                                <div class="text-center">
                                    <i class="bi bi-book" style="font-size: 5rem;"></i>
                                    <p class="mt-3 mb-0 fs-5">No Image Available</p>
                                </div>
                            </div>
                        }
                    </div>

                    <!-- Price and Stock Info -->
                    <div class="p-4">
                        <div class="text-center mb-3">
                            <h3 class="text-success mb-2 fw-bold">
                                @Model.Price.ToString("C")
                            </h3>
                            @if (Model.StockQuantity > 0)

                            {
                                <span class="badge bg-success rounded-pill px-3 py-2">
                                    <i class="bi bi-check-circle me-1"></i>
                                    In Stock (@Model.StockQuantity available)
                                </span>
                            }

                            else

                            {
                                <span class="badge bg-danger rounded-pill px-3 py-2">
                                    <i class="bi bi-x-circle me-1"></i>
                                    Out of Stock
                                </span>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content - Book Details -->
        <div class="col-lg-8 col-md-7">
            <div class="card border-0 shadow-sm rounded-3">
                <div class="card-body p-4">
                    <!-- Title -->
                    <h1 class="display-5 fw-bold text-primary mb-3">
                        @Model.Title
                    </h1>

                    <!-- Category -->
                    <div class="mb-4">
                        <h5 class="text-muted mb-2">Category</h5>
                        <span class="badge bg-primary fs-6 px-3 py-2 rounded-pill">
                            <i class="bi bi-tag me-1"></i>
                            @(Model.Category?.Name ?? "Uncategorized")
                        </span>
                    </div>

                    <!-- Authors -->
                    <div class="mb-4">
                        <h5 class="text-muted mb-2">
                            <i class="bi bi-people me-2"></i>
                            Author@(Model.BookAuthors.Count() > 1 ? "s" : "")
                        </h5>
                        <div class="d-flex flex-wrap gap-2">
                            @foreach (var bookAuthor in Model.BookAuthors)

                            {
                                <span class="badge bg-info text-dark fs-6 px-3 py-2 rounded-pill">
                                    @bookAuthor.Author.FirstName @bookAuthor.Author.LastName
                                </span>
                            }
                        </div>
                    </div>

                    <!-- Book Details Grid -->
                    <div class="row g-4 mb-4">
                        <!-- ISBN -->
                        <div class="col-md-6">
                            <div class="border rounded-3 p-3 h-100">
                                <h6 class="text-muted mb-2">
                                    <i class="bi bi-upc-scan me-2"></i>
                                    ISBN
                                </h6>
                                <p class="mb-0 fw-semibold">@Model.ISBN</p>
                            </div>
                        </div>

                        <!-- Pages -->
                        <div class="col-md-6">
                            <div class="border rounded-3 p-3 h-100">
                                <h6 class="text-muted mb-2">
                                    <i class="bi bi-file-earmark-text me-2"></i>
                                    Pages
                                </h6>
                                <p class="mb-0 fw-semibold">@Model.Pages pages</p>
                            </div>
                        </div>

                        <!-- Language -->
                        <div class="col-md-6">
                            <div class="border rounded-3 p-3 h-100">
                                <h6 class="text-muted mb-2">
                                    <i class="bi bi-globe me-2"></i>
                                    Language
                                </h6>
                                <p class="mb-0 fw-semibold">@Model.Language</p>
                            </div>
                        </div>

                        <!-- Published Date -->
                        <div class="col-md-6">
                            <div class="border rounded-3 p-3 h-100">
                                <h6 class="text-muted mb-2">
                                    <i class="bi bi-calendar-event me-2"></i>
                                    Published
                                </h6>
                                <p class="mb-0 fw-semibold">@Model.PublishedDate.ToString("MMMM dd, yyyy")</p>
                            </div>
                        </div>
                    </div>

                    <!-- Description -->
                    @if (!string.IsNullOrEmpty(Model.Description))

                    {
                        <div class="mb-4">
                            <h5 class="text-muted mb-3">
                                <i class="bi bi-card-text me-2"></i>
                                Description
                            </h5>
                            <div class="border rounded-3 p-4 bg-light">
                                <p class="mb-0 lh-lg">@Model.Description</p>
                            </div>
                        </div>
                    }

                    <!-- Action Buttons -->
                    <div class="d-flex flex-wrap gap-3 mt-4">
                        <a asp-action="Index" class="btn btn-outline-primary btn-lg rounded-pill px-4">
                            <i class="bi bi-arrow-left me-2"></i>
                            Back to Books
                        </a>
                        <a asp-action="Update" asp-route-id="@Model.Id" class="btn btn-outline-primary btn-lg rounded-pill px-4">
                            <i class="bi bi-pencil-fill me-2"></i>
                            Update
                        </a>
                        <a href="javascript:;" class="btn btn-outline-primary btn-lg rounded-pill px-4 js-delete" data-id="@Model.Id">
                            <i class="bi bi-trash3-fill me-2"></i>
                            Delete
                        </a>
                    
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .book-image-container img {
        transition: transform 0.3s ease;
    }

    .book-image-container:hover img {
        transform: scale(1.02);
    }

    .badge {
        font-weight: 500;
    }

    .card {
        transition: box-shadow 0.2s ease;
    }

    .display-5 {
        line-height: 1.2;
    }

</style>

@section Scripts
{
    <script src="~/js/delete-book.js" asp-append-version="true"></script>
}
